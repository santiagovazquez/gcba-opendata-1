<% url = Parcelas::Application.routes.url_helpers %>
var Searchbox = function(){

    //functions
    var registerHandlers,
        doSearch,
        getSearchEndpoint,
        setMapModule,
        getMapModule,
        mapModule;

    doSearch = function(query){
        getMapModule().search(query);
    }

    registerHandlers = function(){
        $("#searchbar").keyup(function(event){
            if(event.keyCode == 13){
                doSearch(this.value);
            }
        });

        $("#searchButton").click(function(){
           doSearch($("#searchbar").val());
        });
    }

    getMapModule = function(){
        return mapModule;
    }

    setMapModule = function(module){
        mapModule = module;
    }

    return {
        init : function(mapModule){
            setMapModule(mapModule);
            registerHandlers();
        }
    }
}();